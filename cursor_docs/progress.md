# 進捗状況

## 完了した機能

### ✅ コア機能
- [x] Discordへの接続機能
- [x] ボイスチャンネルへの参加・退出機能
- [x] VOICEVOX連携による音声合成
- [x] テキストメッセージの読み上げ機能
- [x] デプロイコマンド実装とテスト

### ✅ ユーザー設定機能
- [x] ユーザー設定モデルの実装
- [x] 設定の永続化機能
- [x] 声のタイプ変更コマンド
- [x] 読み上げ速度変更コマンド
- [x] 設定表示コマンド
- [x] 読み上げ有効/無効切り替えコマンド
- [x] サーバーデフォルト設定コマンド

### ✅ 音声合成機能の拡張
- [x] ユーザー設定に基づいた音声パラメータの適用
- [x] 複数の声タイプのサポート
- [x] 速度・ピッチ・イントネーション・音量の調整

### ✅ 品質管理
- [x] ユニットテストの実装
- [x] リンターとフォーマッターの導入
- [x] 型安全性の確保

## 進行中の作業

### 🔄 機能改善
- [ ] 音声合成エラー時の回復メカニズム
- [ ] ユーザー体験の改善
- [ ] パフォーマンス最適化

### 🔄 拡張機能
- [ ] より詳細な音声設定オプション
- [ ] 設定変更時のプレビュー機能

## 今後の予定

### 📝 ドキュメント整備
- [ ] ユーザーガイドの作成
- [ ] API仕様書の更新
- [ ] インストールガイドの改善

### 🚀 将来の機能
- [ ] 読み上げ履歴機能
- [ ] テキスト前処理のカスタマイズ
- [ ] 辞書機能（読み方の調整）
- [ ] Webダッシュボードによる設定管理

## タスク管理

タスク管理は個別のマークダウンファイルで行われるようになりました。各タスクのステータスと詳細情報は以下の場所で確認できます：

`cursor_docs/project-progress/README.md` - タスク一覧と進捗概要
`cursor_docs/project-progress/tasks/` - 個別のタスクファイル

### 完了したタスク

- Docker環境でのVOICEVOX連携問題解決
- ユーザー設定機能の実装

### 進行中のタスク

- タスク管理システムの改良

### 予定されているタスク

- 辞書機能の追加
- 読み上げフィルターの実装
- エラーハンドリングの強化
- テストの拡充

## 2024-03-23
- テキスト読み上げ機能とActiveChannels管理をリファクタリング
- ログ出力機能を強化し、warn関数を追加
- メッセージ整形機能を専用モジュールに分離
- エラーハンドリング機能を改善
- voiceコマンドをjoin, leave, statusの3つのコマンドに分離
  - 各コマンドを個別のファイルとして実装し、テストも分離
  - コマンドハンドラーを対応するように修正
  - クライアント初期化ロジックを改善して新しいコマンド構造に対応
  - 分離したコマンドのテスト実装と成功確認
  - deploy-commandsとhandlers/commandsのテストを修正
  - 古いvoice.tsファイルとvoice.test.tsを削除

## 今後の予定
- deploy-commandsのテスト修正
  - 新しいコマンド構造（join, leave, status）に対応するようにテストを更新
  - エラーメッセージ：`(intermediate value).setName(...).setDescription(...).addChannelOption is not a function`の解決 ✅
- voice.tsファイルと関連テストの削除 ✅
  - 古いコードの安全な削除と影響範囲の確認
- コマンド登録部分のリファクタリングと共通化
  - 新しいコマンド構造に合わせたコマンド登録処理の最適化
  - 共通ロジックの抽出による重複コードの削減 